$(function(){let o={};const a={x:0,y:0,scale:1,angle:0},e=($("[data-option]").on("change",function(t){t.target.checked?(o[t.target.value]={...a},e(t.target.value)):$(`[data-id="${t.target.value}"]`).remove()}),t=>{$(".sticker").removeClass("is-focus");t=`<div class="ball ${t} sticker is-focus" data-id="${t}"><div class="inner"></div></div>`;$(".box").append(t)});var t=document.querySelector(".box"),t=new Hammer.Manager(t);t.add(new Hammer.Pan({threshold:0,pointers:0})),t.add(new Hammer.Pinch({threshold:0,pointers:2})).recognizeWith([t.get("pan")]),t.add(new Hammer.Tap);let d=!1;t.on("panmove panstart panend",function(t){var a,e,s,n,i;0===$(".sticker.is-focus").length||(a=$(".sticker.is-focus"),s=$(a).attr("data-id"),e=o[s],gsap.to(a,{x:e.x+t.deltaX,y:e.y+t.deltaY,duration:0}),"panend"!=t.type)||d||(e.x=e.x+t.deltaX,e.y=e.y+t.deltaY,a=s,e=$(".box").offset().top,t=$(".box").outerHeight(),s=$(`[data-id="${a}"]`).offset().top,n=$(`[data-id="${a}"]`).outerHeight()*o[a].scale,i=t/2-n/2,s<e&&(gsap.to(`[data-id="${a}"]`,{y:-1*i,duration:.2}),o[a].y=-1*i),e+t<s+n&&(gsap.to(`[data-id="${a}"]`,{y:i,duration:.2}),o[a].y=i))}),t.on("pinchmove pinchstart pinchend",function(a){if(0!==$(".sticker.is-focus").length){var e=$(".sticker.is-focus"),s=$(e).attr("data-id"),s=o[s];let t=a.scale-1+s.scale;(t=2<t?2:t)<.5&&(t=.5),gsap.to(e,{scale:t,duration:0}),"pinchstart"==a.type&&(d=!0),"pinchend"==a.type&&(s.scale=t,d=!1)}}),t.on("tap",function(t){$(t.target).hasClass("inner")&&($(".sticker").removeClass("is-focus"),$(t.target).closest(".sticker").addClass("is-focus"))})});